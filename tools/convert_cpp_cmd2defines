#!/bin/sh
#
# Converts -Dmacro to #define macro
#      and -Umacro to #undef macro 
# on standard output
#
# Any options that do not take the form -D* or -U* are placed as comments.
#
# usage: convert_cpp_cmd2defines [-Dmacro1|-Umacro1] [...]
#
# $Header: /home/jahn/src/cvs2git/MITgcm/20170915-2/gcmpack-all-patch/MITgcm/tools/convert_cpp_cmd2defines,v 1.2 2003/11/25 14:18:50 adcroft Exp $
# $Name:  $

cat << EOF
/*
 This file created by convert_cpp_cmd2defines with the following command
 line arguments:
 $@
*/

EOF

BARRIER=

for ac_option ; do
 case $ac_option in
  -b*)
	BARRIER=`echo $ac_option | sed 's/-b//'`
	echo "#ifndef ${BARRIER}"
	echo "#define ${BARRIER}"
	;;
  -D*)
	echo $ac_option | sed 's/-D/#define /' | sed 's/=/ /'
	;;
  -U*)
	echo $ac_option | sed 's/-U/#undef  /' | sed 's/=/ /'
	;;
  *)
	echo "/* " $ac_option " */"
	;;
 esac
done

if test ! "x${BARRIER}" = x ; then
 echo "#endif /* ${BARRIER} */"
fi
